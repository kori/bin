#!/bin/sh
# notification daemon

. $XDG_CONFIG_HOME/wm.conf

# appearance
FONT="metis"
JFONT="kochigothic:size=8"
WIDTH=256
HEIGHT=48
BG="#ff09090d"
FG="#ff839496"
HL="#ff58698c"
DURATION=3

# screen width, width offset, height offset
SW=$(wattr w $(lsw -r))
XO=$((SW - WIDTH - GAP))
YO=$((PANELHEIGHT + GAP))

# named pipe
FIFO=$TMPDIR/notify
[ -p $FIFO ] || mkfifo $FIFO

# main loop
tail -f $FIFO | while read line; do
	(
		echo "%{c}$line"
		sleep $DURATION
	) | lemonbar -d -f $FONT -f $JFONT -B $BG -F $FG \
		-g ${WIDTH}x${HEIGHT}+${XO}+${YO}
done
